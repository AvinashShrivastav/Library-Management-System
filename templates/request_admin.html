<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../static/css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
        integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
</head>

<body>

    <!-- navbar start -->
    <nav class="navbar navbar-expand-md navbar-light bg-light">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
            aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNavAltMarkup">
            <div class="navbar-nav">
                <a class="nav-link active" href="templates\user_mybooks.html">My Books</a>
                <a class="nav-link" href="/admin_req">Book   <span
                    class="sr-only">(current)</span></a>
                <a class="nav-link" href="templates\user_books.html">Books</a>
                <a class="nav-link" href="#">Stats</a>
            </div>
            <div class="d-flex align-items-center">
                <button type="button" class="btn btn-light">Logout</button>
            </div>
        </div>
    </nav>
    <!-- navbar end -->

    <!-- main-section start -->
    <div class="main">

        <!-- search-box start-->
        <div class="navbar">
            <a class="navbar-brand">Requests</a>
        </div>
        <!-- search-box end -->




        <div class="request-table">

            <!-- requested books section starts here  -->
            <div class="heading">
                <h2 class="navbar-brand">Requested</h2>
            </div>

            <table class="table table-hover table-bordered">
                <thead class="bill-header cs">
                    <tr>
                        <th>Book title</th>
                        <th>User</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for request in requests%}
                    
                    <tr data-href="/req_receive/{{request[1].id}}/{{request[0].id}}">
                 
                        <td>{{request[0].name}}</td>
                        <td>{{request[1].name}}</td>
    
                        <td>
                            <a href="/reject" class="btn btn-danger" type="button">Reject</a>
                            <a href="/grant/{{request[1].id}}/{{request[0].id}}" class="btn btn-success"
                                type="button">Grant</a>
                        </td>
                    

                    </tr>
                    
                    {% endfor %}
                </tbody>
            </table>
            <!-- requested books section ends here  -->



            <!-- issued books section starts here  -->
            <div class="heading">
                <h2 class="navbar-brand">Issued</h2>
            </div>
            <table class="table table-hover table-bordered">
                <thead class="bill-header cs">
                    <tr>
                        <th>Book title</th>
                        <th>User</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for issue in issued%}
                    <a href="">
                        <tr data-toggle="modal" data-target="#requestModal">
                            <td>{{issue[0].name}}</td>
                            <td>{{issue[1].name}}</td>
                            <td>
                                <a class="btn btn-danger" type="button">Revoke</a>
                            </td>
                        </tr>
                    </a>
                    {% endfor %}
                </tbody>
            </table>

            <!-- completed books section ends here  -->

        </div>




    </div>
    <!-- main-section end -->


<!-- Modal Structure -->
<div class="modal fade" id="requestModal" tabindex="-1" aria-labelledby="requestModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="requestModalLabel">Book Request</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <h6 class="book-title">Username: Jawaharlal Nehru</h6>
        <p class="book-author">Days Requested: 5</p>
        <p class="book-author">Book Title: The Discovery of British India</p>
        <p class="book-sec">Book Section: History</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger">Reject</button>
        <button type="button" class="btn btn-success">Grant</button>
        <button type="button" class="btn btn-warning">View Book</button>
      </div>
    </div>
  </div>
</div>





    <style>
        .request-table {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .request-table table {
            width: 80%;
        }

        .heading {
            width: 80%;
        }
    </style>


    <footer>
        <div class="footer">
            @Copyright IITM BS Project by Avinash Shrivastava
        </div>
    </footer>

</body>

</html>